The backend for Nitrogen.

This refactor hasn't been fully completed due to sudden health issues, I'm posting the WIP code here (uncomplete, buggy).

Migration (`carbyneMigration.ts`) is fully complete, the API functions in `api.ts` just haven't been updated to support it yet (and the support there is very buggy, do lots of testing).
